getgenv().Save = {
    ["Auto Farm Gems"] = true
}

local function autoFarmGems()
    spawn(function()
        while wait(0.1) do
            pcall(function()
                if getgenv().Save["Auto Farm Gems"] and game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Health > 0 and #game.Players.LocalPlayer:WaitForChild("Backpack"):GetChildren() > 0 then
                    repeat
                        wait(0.1)
                        if game.Workspace:WaitForChild("UserData"):WaitForChild("User_" .. game.Players.LocalPlayer.UserId):WaitForChild("Data"):WaitForChild("MissionObjective").Value ~= "Quests" and game.Workspace:WaitForChild("UserData"):WaitForChild("User_" .. game.Players.LocalPlayer.UserId):WaitForChild("Data"):WaitForChild("MissionObjective").Value ~= "None" then
                            workspace:WaitForChild("UserData"):WaitForChild("User_" .. game.Players.LocalPlayer.UserId):WaitForChild("Stats"):FireServer()
                        end
                        wait(0.5)
                        if game.Workspace:WaitForChild("UserData"):WaitForChild("User_" .. game.Players.LocalPlayer.UserId):WaitForChild("Data"):WaitForChild("MissionObjective").Value ~= "Quests" and game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_4"].Claim.AutoButtonColor == false and game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_4"].Claim.TextLabel.Text == "Claim" then
                            workspace:WaitForChild("Merchants"):WaitForChild("ExpertiseMerchant"):WaitForChild("Clickable"):WaitForChild("Retum"):FireServer()
                        end
                        wait(0.5)
                    until game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Health == 0 or game.Workspace.UserData["User_" .. game.Players.LocalPlayer.UserId].Data.MissionObjective.Value == "Quests" or getgenv().Save["Auto Farm Gems"] == false or game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_4"].Claim.AutoButtonColor or game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_4"].Claim.TextLabel.Text == "Completed"
                    end
                end)
            end
        end
    end)
end

local function autoFarmMobs()
    spawn(function()
        while wait(0.1) do
            pcall(function()
                if getgenv().Save["Auto Farm Gems"] and game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Health > 0 then
                    for _, mob in pairs(game.Workspace.Enemies:GetChildren()) do
                        if (mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0) and (string.find(mob.Name, "Crab") or string.find(mob.Name, "Lv12 Thug") or string.find(mob.Name, "Lv9 Bandit") or string.find(mob.Name, "Lv2 Angry Bob") or string.find(mob.Name, "Lv4 Freddy") or string.find(mob.Name, "Boar")) then
                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = mob:FindFirstChild("HumanoidRootPart").CFrame * CFrame.new(0, 10, 10)
                            wait(0.1)
                            mob.Humanoid.Health = 0
                            mob.Humanoid:ChangeState(Enum.HumanoidStateType.Dead)
                            mob:FindFirstChild("Head"):Destroy()
                            wait(0.7)
                            repeat
                                wait(0.1)
                                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = mob:FindFirstChild("HumanoidRootPart").CFrame * CFrame.new(0, 0, 3)
                            until game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Health == 0 or not mob:FindFirstChild("HumanoidRootPart") or game.Workspace.UserData["User_" .. game.Players.LocalPlayer.UserId].Data.Kills.Value ~= killstat or game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_3"].Claim.AutoButtonColor == true or game.Players.LocalPlayer:WaitForChild("PlayerGui").Challenges.Frame.Frame.DailyFrame.ScrollingFrame["Challenge_3"].Claim.TextLabel.Text == "Completed" or getgenv().Save["Auto Farm Gems"] == false
                        end
                    end
                end
            end)
        end
    end)
end

autoFarmGems()
autoFarmMobs()

spawn(function() -- Auto farm velocity
    while wait() do
        pcall(function()
            if getgenv().Save["Auto Farm Gems"] == true then
                if not game:GetService("Players").LocalPlayer.Character.HumanoidRootPart:FindFirstChild("BodyClip") then
                    local Noclip = Instance.new("BodyVelocity")
                    Noclip.Name = "BodyClip"
                    Noclip.Parent = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart
                    Noclip.MaxForce = Vector3.new(100000, 100000, 100000)
                    Noclip.Velocity = Vector3.new(0, 0, 0)
                end
                game.Players.LocalPlayer.Character.Humanoid.JumpPower = 0
            elseif getgenv().Save["Auto Farm Gems"] == false then
                local bodyClip = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart:FindFirstChild("BodyClip")
                if bodyClip then
                    bodyClip:Destroy()
                end
                wait(1)
                game.Players.LocalPlayer.Character.Humanoid.JumpPower = 50
            end
        end)
    end
end)
