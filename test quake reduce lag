local function connectChildDestroy(folder)
    if folder then
        folder.ChildAdded:Connect(function(child)
            task.wait() -- Allow time for the child to initialize
            pcall(function()
                if child then
                    child:Destroy()
                end
            end)
        end)
    end
end

local function setupQuakeHandlers(player)
    local playerWorkspace = game.Workspace:FindFirstChild(player.Name)
    if not playerWorkspace then return end

    local powers = playerWorkspace:FindFirstChild("Powers")
    if not powers then return end

    local quake = powers:FindFirstChild("Quake")
    if not quake then return end

    connectChildDestroy(quake:FindFirstChild("CutEffects"))
    connectChildDestroy(quake:FindFirstChild("GlowEffects"))
    connectChildDestroy(quake:FindFirstChild("P4"))
    connectChildDestroy(quake:FindFirstChild("Rocks"))
end

for _, player in pairs(game:GetService("Players"):GetPlayers()) do
    setupQuakeHandlers(player)
end

game:GetService("Players").PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        task.wait() -- Allow the character to appear in the workspace
        setupQuakeHandlers(player)
    end)
end)
